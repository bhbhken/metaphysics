# IOC

控制反转

## 1 IOC 思想篇

​    **IOC** 是 **Inversion of Control** 的缩写，即是我们平常所说的**控制反转**。是一种我们一直在用但是可能自己都没有意识到的一种设计思想。控制反转并不是 **Spring** 所特有的，**Spring** 为我们所做的更多的可以说是为我们创建并管理 **Bean**，然后在我们需要的时候再依赖注入（**Dependency Injection**）给我们。这也是为什么后来 **SpringIOC** 更多又叫 **Spring DI**。**SpringIOC** 是一种思想，而 **DI** 依赖注入是这种思想的具体实现方案。

- 正向依赖设计

  控制正转这种设计，虽然简化了我们构造的逻辑复杂性，但是这种设计在需要调整的时候却需要修改**整个上层所有被关联控制类的构造函数！**在软件工程中，这样的设计几乎是不可维护的——在实际工程项目中，有的类可能会是几千个类的底层，如果每次修改一个底层这个类，我们都要修改所有以它作为依赖的类，那软件的维护成本就太高了。

- 反向依赖设计

  构造函数注入和setter注入，需要维护更多bean的依赖关系。

## 2 依赖注入编程思想篇

​    控制反转其实就是我们在开发过程中几乎就不会干的事，我们已经习惯了 setter 注入的方式。所以说控制反转其实是一件很简单的事，但是就是这个名字太晦涩难懂，听起来太过高大上了。虽然控制反转来了巨大的灵活性，但是也使得依赖关系的管理变的复杂。

   **Spring 工厂使用的更多的是setter的方式，因为构造函数传入的方式有比较严格的 Bean 构建顺序要求，并且不灵活。但是 setter 的注入方式却没有构建顺序上的要求。**

## 3 原理

- 反射