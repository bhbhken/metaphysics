# 什么是缓存穿透？怎么解决?

缓存穿透是指缓存中查询一个不存在的数据，需要去数据库中获取。

如果数据库也查不到结果，将不会同步到缓存，导致这个不存在数据每次请求都要到数据库查询，失去了缓存的意义。

解决方法有两个：

**1. 布隆过滤（Bloom filter）**

将所有查询的参数都存储到一个 **bitmap** 中，在查询缓存之前，先再找个 **bitmap** 里面进行验证。

如果 **bitmap** 中存在，则进行底层缓存的数据查询； 如果 **bitmap** 中不存在查询参数，则进行拦截，不再进行缓存的数据查询。

适用范围：可以用来实现数据字典，进行数据的判重，或者集合求交集

**2. 缓存空对象**

如果查询返回的数据为空，仍然把这个空结果进行缓存。那么再次用相同 **key** 获取数据的时候，即使不存在的数据，缓存也可以直接返回空值，避免重复访问 DB。

缓存空对象有两个不足之处：

1. 缓存层将存储更多的键值对，如果是恶意的随机访问，将造成很多内存空间的浪费。这个不足之处可以通过将这类数据设置很短的过期时间来控制。
2. **DB** 与缓存数据不一致。这种可以考虑通过异步消息来进行数据更新的通知，在一定程度上减少这类不一致的时间。